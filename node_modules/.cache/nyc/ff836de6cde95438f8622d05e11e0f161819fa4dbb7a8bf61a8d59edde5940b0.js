'use strict';var cov_1w4s1i0v9p=function(){var path="C:\\Users\\nono.DESKTOP-OPOSFU3\\Desktop\\andela-banka\\server\\middlewares\\loginValidations.js";var hash="65e476134dc67afb73df79e11069fe001cff5085";var Function=function(){}.constructor;var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\nono.DESKTOP-OPOSFU3\\Desktop\\andela-banka\\server\\middlewares\\loginValidations.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:7,column:14},end:{line:7,column:31}},"2":{start:{line:9,column:15},end:{line:9,column:46}},"3":{start:{line:11,column:13},end:{line:11,column:35}},"4":{start:{line:13,column:14},end:{line:13,column:44}},"5":{start:{line:15,column:39},end:{line:15,column:93}},"6":{start:{line:17,column:22},end:{line:44,column:1}},"7":{start:{line:18,column:22},end:{line:18,column:34}},"8":{start:{line:19,column:14},end:{line:19,column:33}},"9":{start:{line:20,column:17},end:{line:20,column:39}},"10":{start:{line:22,column:16},end:{line:22,column:166}},"11":{start:{line:23,column:2},end:{line:42,column:3}},"12":{start:{line:23,column:15},end:{line:23,column:16}},"13":{start:{line:24,column:4},end:{line:29,column:5}},"14":{start:{line:25,column:6},end:{line:28,column:9}},"15":{start:{line:30,column:4},end:{line:35,column:5}},"16":{start:{line:31,column:6},end:{line:34,column:9}},"17":{start:{line:36,column:4},end:{line:41,column:5}},"18":{start:{line:37,column:6},end:{line:40,column:9}},"19":{start:{line:43,column:2},end:{line:43,column:9}},"20":{start:{line:46,column:0},end:{line:46,column:34}}},fnMap:{"0":{name:"_interopRequireDefault",decl:{start:{line:15,column:9},end:{line:15,column:31}},loc:{start:{line:15,column:37},end:{line:15,column:95}},line:15},"1":{name:"loginValidation",decl:{start:{line:17,column:31},end:{line:17,column:46}},loc:{start:{line:17,column:72},end:{line:44,column:1}},line:17}},branchMap:{"0":{loc:{start:{line:15,column:46},end:{line:15,column:92}},type:"cond-expr",locations:[{start:{line:15,column:70},end:{line:15,column:73}},{start:{line:15,column:76},end:{line:15,column:92}}],line:15},"1":{loc:{start:{line:15,column:46},end:{line:15,column:67}},type:"binary-expr",locations:[{start:{line:15,column:46},end:{line:15,column:49}},{start:{line:15,column:53},end:{line:15,column:67}}],line:15},"2":{loc:{start:{line:24,column:4},end:{line:29,column:5}},type:"if",locations:[{start:{line:24,column:4},end:{line:29,column:5}},{start:{line:24,column:4},end:{line:29,column:5}}],line:24},"3":{loc:{start:{line:30,column:4},end:{line:35,column:5}},type:"if",locations:[{start:{line:30,column:4},end:{line:35,column:5}},{start:{line:30,column:4},end:{line:35,column:5}}],line:30},"4":{loc:{start:{line:36,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:36,column:4},end:{line:41,column:5}},{start:{line:36,column:4},end:{line:41,column:5}}],line:36}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_1w4s1i0v9p.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});var _bcrypt=(cov_1w4s1i0v9p.s[1]++,require('bcrypt'));var _bcrypt2=(cov_1w4s1i0v9p.s[2]++,_interopRequireDefault(_bcrypt));var _users=(cov_1w4s1i0v9p.s[3]++,require('../db/users'));var _users2=(cov_1w4s1i0v9p.s[4]++,_interopRequireDefault(_users));function _interopRequireDefault(obj){cov_1w4s1i0v9p.f[0]++;cov_1w4s1i0v9p.s[5]++;return(cov_1w4s1i0v9p.b[1][0]++,obj)&&(cov_1w4s1i0v9p.b[1][1]++,obj.__esModule)?(cov_1w4s1i0v9p.b[0][0]++,obj):(cov_1w4s1i0v9p.b[0][1]++,{default:obj});}cov_1w4s1i0v9p.s[6]++;var loginValidation=function loginValidation(request,response,next){cov_1w4s1i0v9p.f[1]++;var _request$body=(cov_1w4s1i0v9p.s[7]++,request.body),email=(cov_1w4s1i0v9p.s[8]++,_request$body.email),password=(cov_1w4s1i0v9p.s[9]++,_request$body.password);var pattern=(cov_1w4s1i0v9p.s[10]++,/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);cov_1w4s1i0v9p.s[11]++;for(var i=(cov_1w4s1i0v9p.s[12]++,0);i<_users2.default.length;i+=1){cov_1w4s1i0v9p.s[13]++;if(!email){cov_1w4s1i0v9p.b[2][0]++;cov_1w4s1i0v9p.s[14]++;return response.status(400).json({status:400,error:'email is required'});}else{cov_1w4s1i0v9p.b[2][1]++;}cov_1w4s1i0v9p.s[15]++;if(!email.match(pattern)){cov_1w4s1i0v9p.b[3][0]++;cov_1w4s1i0v9p.s[16]++;return response.status(400).json({status:400,error:'Please provide a valid email'});}else{cov_1w4s1i0v9p.b[3][1]++;}cov_1w4s1i0v9p.s[17]++;if(!password){cov_1w4s1i0v9p.b[4][0]++;cov_1w4s1i0v9p.s[18]++;return response.status(400).json({status:400,error:'password is required to login'});}else{cov_1w4s1i0v9p.b[4][1]++;}}cov_1w4s1i0v9p.s[19]++;next();};cov_1w4s1i0v9p.s[20]++;exports.default=loginValidation;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2luVmFsaWRhdGlvbnMuanMiXSwibmFtZXMiOlsibG9naW5WYWxpZGF0aW9uIiwicmVxdWVzdCIsInJlc3BvbnNlIiwibmV4dCIsImJvZHkiLCJlbWFpbCIsInBhc3N3b3JkIiwicGF0dGVybiIsImkiLCJ1c2VycyIsImxlbmd0aCIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsIm1hdGNoIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7OztBQUNBOzs7Ozs7QUFFQSxJQUFNQSxrQkFBa0IsU0FBbEJBLGVBQWtCLENBQUNDLE9BQUQsRUFBVUMsUUFBVixFQUFvQkMsSUFBcEIsRUFBNkI7QUFBQSxzQkFDdkJGLFFBQVFHLElBRGU7QUFBQSxNQUMzQ0MsS0FEMkMsaUJBQzNDQSxLQUQyQztBQUFBLE1BQ3BDQyxRQURvQyxpQkFDcENBLFFBRG9DOztBQUVuRCxNQUFNQyxVQUFVLHNKQUFoQjtBQUNBLE9BQUssSUFBSUMsSUFBSSxDQUFiLEVBQWdCQSxJQUFJQyxnQkFBTUMsTUFBMUIsRUFBa0NGLEtBQUssQ0FBdkMsRUFBMEM7QUFDeEMsUUFBSSxDQUFDSCxLQUFMLEVBQVk7QUFDVixhQUFPSCxTQUFTUyxNQUFULENBQWdCLEdBQWhCLEVBQXFCQyxJQUFyQixDQUEwQjtBQUMvQkQsZ0JBQVEsR0FEdUI7QUFFL0JFLGVBQU87QUFGd0IsT0FBMUIsQ0FBUDtBQUlEO0FBQ0QsUUFBSSxDQUFDUixNQUFNUyxLQUFOLENBQVlQLE9BQVosQ0FBTCxFQUEyQjtBQUN6QixhQUFPTCxTQUFTUyxNQUFULENBQWdCLEdBQWhCLEVBQXFCQyxJQUFyQixDQUEwQjtBQUMvQkQsZ0JBQVEsR0FEdUI7QUFFL0JFLGVBQU87QUFGd0IsT0FBMUIsQ0FBUDtBQUlEO0FBQ0QsUUFBSSxDQUFDUCxRQUFMLEVBQWU7QUFDYixhQUFPSixTQUFTUyxNQUFULENBQWdCLEdBQWhCLEVBQXFCQyxJQUFyQixDQUEwQjtBQUMvQkQsZ0JBQVEsR0FEdUI7QUFFL0JFLGVBQU87QUFGd0IsT0FBMUIsQ0FBUDtBQUlEO0FBQ0Y7QUFDRFY7QUFDRCxDQXhCRDs7a0JBMEJlSCxlIiwiZmlsZSI6ImxvZ2luVmFsaWRhdGlvbnMuanMiLCJzb3VyY2VSb290IjoiQzovVXNlcnMvbm9uby5ERVNLVE9QLU9QT1NGVTMvRGVza3RvcC9hbmRlbGEtYmFua2Evc2VydmVyL21pZGRsZXdhcmVzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGJjcnlwdCBmcm9tICdiY3J5cHQnO1xuaW1wb3J0IHVzZXJzIGZyb20gJy4uL2RiL3VzZXJzJztcblxuY29uc3QgbG9naW5WYWxpZGF0aW9uID0gKHJlcXVlc3QsIHJlc3BvbnNlLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkIH0gPSByZXF1ZXN0LmJvZHk7XG4gIGNvbnN0IHBhdHRlcm4gPSAvXigoW148PigpW1xcXVxcXFwuLDs6XFxzQFwiXSsoXFwuW148PigpW1xcXVxcXFwuLDs6XFxzQFwiXSspKil8KFwiLitcIikpQCgoXFxbWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfV0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLH0pKSQvO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHVzZXJzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgaWYgKCFlbWFpbCkge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICBzdGF0dXM6IDQwMCxcbiAgICAgICAgZXJyb3I6ICdlbWFpbCBpcyByZXF1aXJlZCcsXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKCFlbWFpbC5tYXRjaChwYXR0ZXJuKSkge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICBzdGF0dXM6IDQwMCxcbiAgICAgICAgZXJyb3I6ICdQbGVhc2UgcHJvdmlkZSBhIHZhbGlkIGVtYWlsJyxcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoIXBhc3N3b3JkKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2Uuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgIHN0YXR1czogNDAwLFxuICAgICAgICBlcnJvcjogJ3Bhc3N3b3JkIGlzIHJlcXVpcmVkIHRvIGxvZ2luJyxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBuZXh0KCk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBsb2dpblZhbGlkYXRpb247XG4iXX0=