'use strict';var cov_1w4s1i0v9p=function(){var path="C:\\Users\\nono.DESKTOP-OPOSFU3\\Desktop\\andela-banka\\server\\middlewares\\loginValidations.js";var hash="585a9661756376e74f78a96ac1eaadabb6c1769f";var Function=function(){}.constructor;var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\nono.DESKTOP-OPOSFU3\\Desktop\\andela-banka\\server\\middlewares\\loginValidations.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:7,column:13},end:{line:7,column:35}},"2":{start:{line:9,column:14},end:{line:9,column:44}},"3":{start:{line:11,column:39},end:{line:11,column:93}},"4":{start:{line:13,column:22},end:{line:52,column:1}},"5":{start:{line:14,column:22},end:{line:14,column:34}},"6":{start:{line:15,column:14},end:{line:15,column:33}},"7":{start:{line:16,column:17},end:{line:16,column:39}},"8":{start:{line:18,column:16},end:{line:18,column:166}},"9":{start:{line:19,column:2},end:{line:50,column:3}},"10":{start:{line:19,column:15},end:{line:19,column:16}},"11":{start:{line:20,column:4},end:{line:25,column:5}},"12":{start:{line:21,column:6},end:{line:24,column:9}},"13":{start:{line:26,column:4},end:{line:31,column:5}},"14":{start:{line:27,column:6},end:{line:30,column:9}},"15":{start:{line:32,column:4},end:{line:37,column:5}},"16":{start:{line:33,column:6},end:{line:36,column:9}},"17":{start:{line:38,column:4},end:{line:43,column:5}},"18":{start:{line:39,column:6},end:{line:42,column:9}},"19":{start:{line:44,column:4},end:{line:49,column:5}},"20":{start:{line:45,column:6},end:{line:48,column:9}},"21":{start:{line:51,column:2},end:{line:51,column:9}},"22":{start:{line:54,column:0},end:{line:54,column:34}}},fnMap:{"0":{name:"_interopRequireDefault",decl:{start:{line:11,column:9},end:{line:11,column:31}},loc:{start:{line:11,column:37},end:{line:11,column:95}},line:11},"1":{name:"loginValidation",decl:{start:{line:13,column:31},end:{line:13,column:46}},loc:{start:{line:13,column:72},end:{line:52,column:1}},line:13}},branchMap:{"0":{loc:{start:{line:11,column:46},end:{line:11,column:92}},type:"cond-expr",locations:[{start:{line:11,column:70},end:{line:11,column:73}},{start:{line:11,column:76},end:{line:11,column:92}}],line:11},"1":{loc:{start:{line:11,column:46},end:{line:11,column:67}},type:"binary-expr",locations:[{start:{line:11,column:46},end:{line:11,column:49}},{start:{line:11,column:53},end:{line:11,column:67}}],line:11},"2":{loc:{start:{line:20,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:20,column:4},end:{line:25,column:5}},{start:{line:20,column:4},end:{line:25,column:5}}],line:20},"3":{loc:{start:{line:26,column:4},end:{line:31,column:5}},type:"if",locations:[{start:{line:26,column:4},end:{line:31,column:5}},{start:{line:26,column:4},end:{line:31,column:5}}],line:26},"4":{loc:{start:{line:32,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:32,column:4},end:{line:37,column:5}},{start:{line:32,column:4},end:{line:37,column:5}}],line:32},"5":{loc:{start:{line:38,column:4},end:{line:43,column:5}},type:"if",locations:[{start:{line:38,column:4},end:{line:43,column:5}},{start:{line:38,column:4},end:{line:43,column:5}}],line:38},"6":{loc:{start:{line:44,column:4},end:{line:49,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:49,column:5}},{start:{line:44,column:4},end:{line:49,column:5}}],line:44}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_1w4s1i0v9p.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});var _users=(cov_1w4s1i0v9p.s[1]++,require('../db/users'));var _users2=(cov_1w4s1i0v9p.s[2]++,_interopRequireDefault(_users));function _interopRequireDefault(obj){cov_1w4s1i0v9p.f[0]++;cov_1w4s1i0v9p.s[3]++;return(cov_1w4s1i0v9p.b[1][0]++,obj)&&(cov_1w4s1i0v9p.b[1][1]++,obj.__esModule)?(cov_1w4s1i0v9p.b[0][0]++,obj):(cov_1w4s1i0v9p.b[0][1]++,{default:obj});}cov_1w4s1i0v9p.s[4]++;var loginValidation=function loginValidation(request,response,next){cov_1w4s1i0v9p.f[1]++;var _request$body=(cov_1w4s1i0v9p.s[5]++,request.body),email=(cov_1w4s1i0v9p.s[6]++,_request$body.email),password=(cov_1w4s1i0v9p.s[7]++,_request$body.password);var pattern=(cov_1w4s1i0v9p.s[8]++,/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);cov_1w4s1i0v9p.s[9]++;for(var i=(cov_1w4s1i0v9p.s[10]++,0);i<_users2.default.length;i+=1){cov_1w4s1i0v9p.s[11]++;if(!email){cov_1w4s1i0v9p.b[2][0]++;cov_1w4s1i0v9p.s[12]++;return response.status(400).json({status:400,error:'email is required'});}else{cov_1w4s1i0v9p.b[2][1]++;}cov_1w4s1i0v9p.s[13]++;if(!email.match(pattern)){cov_1w4s1i0v9p.b[3][0]++;cov_1w4s1i0v9p.s[14]++;return response.status(400).json({status:400,error:'Please provide a valid email'});}else{cov_1w4s1i0v9p.b[3][1]++;}cov_1w4s1i0v9p.s[15]++;if(!password){cov_1w4s1i0v9p.b[4][0]++;cov_1w4s1i0v9p.s[16]++;return response.status(400).json({status:400,error:'password is required to login'});}else{cov_1w4s1i0v9p.b[4][1]++;}cov_1w4s1i0v9p.s[17]++;if(_users2.default[i].email!==email){cov_1w4s1i0v9p.b[5][0]++;cov_1w4s1i0v9p.s[18]++;return response.status(404).json({status:404,error:'Email does or password incorrect'});}else{cov_1w4s1i0v9p.b[5][1]++;}cov_1w4s1i0v9p.s[19]++;if(_users2.default[i].password!==password){cov_1w4s1i0v9p.b[6][0]++;cov_1w4s1i0v9p.s[20]++;return response.status(404).json({status:404,error:'Email does or password incorrect'});}else{cov_1w4s1i0v9p.b[6][1]++;}}cov_1w4s1i0v9p.s[21]++;next();};cov_1w4s1i0v9p.s[22]++;exports.default=loginValidation;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2luVmFsaWRhdGlvbnMuanMiXSwibmFtZXMiOlsibG9naW5WYWxpZGF0aW9uIiwicmVxdWVzdCIsInJlc3BvbnNlIiwibmV4dCIsImJvZHkiLCJlbWFpbCIsInBhc3N3b3JkIiwicGF0dGVybiIsImkiLCJ1c2VycyIsImxlbmd0aCIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsIm1hdGNoIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7Ozs7O0FBRUEsSUFBTUEsa0JBQWtCLFNBQWxCQSxlQUFrQixDQUFDQyxPQUFELEVBQVVDLFFBQVYsRUFBb0JDLElBQXBCLEVBQTZCO0FBQUEsc0JBQ3ZCRixRQUFRRyxJQURlO0FBQUEsTUFDM0NDLEtBRDJDLGlCQUMzQ0EsS0FEMkM7QUFBQSxNQUNwQ0MsUUFEb0MsaUJBQ3BDQSxRQURvQzs7QUFFbkQsTUFBTUMsVUFBVSxzSkFBaEI7QUFDQSxPQUFLLElBQUlDLElBQUksQ0FBYixFQUFnQkEsSUFBSUMsZ0JBQU1DLE1BQTFCLEVBQWtDRixLQUFLLENBQXZDLEVBQTBDO0FBQ3hDLFFBQUksQ0FBQ0gsS0FBTCxFQUFZO0FBQ1YsYUFBT0gsU0FBU1MsTUFBVCxDQUFnQixHQUFoQixFQUFxQkMsSUFBckIsQ0FBMEI7QUFDL0JELGdCQUFRLEdBRHVCO0FBRS9CRSxlQUFPO0FBRndCLE9BQTFCLENBQVA7QUFJRDtBQUNELFFBQUksQ0FBQ1IsTUFBTVMsS0FBTixDQUFZUCxPQUFaLENBQUwsRUFBMkI7QUFDekIsYUFBT0wsU0FBU1MsTUFBVCxDQUFnQixHQUFoQixFQUFxQkMsSUFBckIsQ0FBMEI7QUFDL0JELGdCQUFRLEdBRHVCO0FBRS9CRSxlQUFPO0FBRndCLE9BQTFCLENBQVA7QUFJRDtBQUNELFFBQUksQ0FBQ1AsUUFBTCxFQUFlO0FBQ2IsYUFBT0osU0FBU1MsTUFBVCxDQUFnQixHQUFoQixFQUFxQkMsSUFBckIsQ0FBMEI7QUFDL0JELGdCQUFRLEdBRHVCO0FBRS9CRSxlQUFPO0FBRndCLE9BQTFCLENBQVA7QUFJRDtBQUNELFFBQUlKLGdCQUFNRCxDQUFOLEVBQVNILEtBQVQsS0FBbUJBLEtBQXZCLEVBQThCO0FBQzVCLGFBQU9ILFNBQVNTLE1BQVQsQ0FBZ0IsR0FBaEIsRUFBcUJDLElBQXJCLENBQTBCO0FBQy9CRCxnQkFBUSxHQUR1QjtBQUUvQkUsZUFBTztBQUZ3QixPQUExQixDQUFQO0FBSUQ7QUFDRCxRQUFJSixnQkFBTUQsQ0FBTixFQUFTRixRQUFULEtBQXNCQSxRQUExQixFQUFvQztBQUNsQyxhQUFPSixTQUFTUyxNQUFULENBQWdCLEdBQWhCLEVBQXFCQyxJQUFyQixDQUEwQjtBQUMvQkQsZ0JBQVEsR0FEdUI7QUFFL0JFLGVBQU87QUFGd0IsT0FBMUIsQ0FBUDtBQUlEO0FBQ0Y7QUFDRFY7QUFDRCxDQXBDRDs7a0JBc0NlSCxlIiwiZmlsZSI6ImxvZ2luVmFsaWRhdGlvbnMuanMiLCJzb3VyY2VSb290IjoiQzovVXNlcnMvbm9uby5ERVNLVE9QLU9QT1NGVTMvRGVza3RvcC9hbmRlbGEtYmFua2Evc2VydmVyL21pZGRsZXdhcmVzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHVzZXJzIGZyb20gJy4uL2RiL3VzZXJzJztcblxuY29uc3QgbG9naW5WYWxpZGF0aW9uID0gKHJlcXVlc3QsIHJlc3BvbnNlLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkIH0gPSByZXF1ZXN0LmJvZHk7XG4gIGNvbnN0IHBhdHRlcm4gPSAvXigoW148PigpW1xcXVxcXFwuLDs6XFxzQFwiXSsoXFwuW148PigpW1xcXVxcXFwuLDs6XFxzQFwiXSspKil8KFwiLitcIikpQCgoXFxbWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfV0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLH0pKSQvO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHVzZXJzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgaWYgKCFlbWFpbCkge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICBzdGF0dXM6IDQwMCxcbiAgICAgICAgZXJyb3I6ICdlbWFpbCBpcyByZXF1aXJlZCcsXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKCFlbWFpbC5tYXRjaChwYXR0ZXJuKSkge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICBzdGF0dXM6IDQwMCxcbiAgICAgICAgZXJyb3I6ICdQbGVhc2UgcHJvdmlkZSBhIHZhbGlkIGVtYWlsJyxcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoIXBhc3N3b3JkKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2Uuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgIHN0YXR1czogNDAwLFxuICAgICAgICBlcnJvcjogJ3Bhc3N3b3JkIGlzIHJlcXVpcmVkIHRvIGxvZ2luJyxcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAodXNlcnNbaV0uZW1haWwgIT09IGVtYWlsKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2Uuc3RhdHVzKDQwNCkuanNvbih7XG4gICAgICAgIHN0YXR1czogNDA0LFxuICAgICAgICBlcnJvcjogJ0VtYWlsIGRvZXMgb3IgcGFzc3dvcmQgaW5jb3JyZWN0JyxcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAodXNlcnNbaV0ucGFzc3dvcmQgIT09IHBhc3N3b3JkKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2Uuc3RhdHVzKDQwNCkuanNvbih7XG4gICAgICAgIHN0YXR1czogNDA0LFxuICAgICAgICBlcnJvcjogJ0VtYWlsIGRvZXMgb3IgcGFzc3dvcmQgaW5jb3JyZWN0JyxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBuZXh0KCk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBsb2dpblZhbGlkYXRpb247XG4iXX0=